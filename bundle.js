(()=>{"use strict";var t={607:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0});var i,o,s,l,a,h,u,c=r(532);i=document.getElementById("hl-list"),o=document.getElementById("hl-create"),s=document.getElementById("hl-offset"),l=document.getElementById("hl-length"),a=document.getElementById("hl-class"),h=document.getElementById("hl-add"),u=new c.Editor(document.getElementById("editor")),h.addEventListener("click",(function(){u.addHighlight([Number(s.value),Number(l.value),a.value])})),u.addEventListener("change",(function(){i.querySelectorAll("tr:not(.create)").forEach((function(t){i.removeChild(t)})),u.highlights.forEach((function(t,e){var r=n(t,3),s=r[0],l=r[1],a=r[2],h=document.createElement("tr"),u=document.createElement("td"),c=document.createElement("td"),d=document.createElement("td"),f=document.createElement("td");u.textContent=""+(e+1),c.textContent=""+s,d.textContent=""+l,f.textContent=a,h.appendChild(u),h.appendChild(c),h.appendChild(d),h.appendChild(f),i.insertBefore(h,o)}))}))},50:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=s(r(884)),a=s(r(463)),h=function(){function t(t,e){void 0===e&&(e=""),this._elem=t,this._highlights=[],this._cursor=[0,0,0],this._delegator=document.createDocumentFragment(),this._elem.addEventListener("keydown",this.onkeydown.bind(this)),this._elem.addEventListener("paste",this.onpaste.bind(this)),this._rope=a.default.leaf(e),this.render()}return t.prototype.addEventListener=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this._delegator).addEventListener.apply(t,i([],n(e)))},t.prototype.dispatchEvent=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this._delegator).dispatchEvent.apply(t,i([],n(e)))},t.prototype.removeEventListener=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this._delegator).removeEventListener.apply(t,i([],n(e)))},Object.defineProperty(t.prototype,"highlights",{get:function(){return Array.from(this._highlights)},enumerable:!1,configurable:!0}),t.prototype.addHighlight=function(t){this._highlights.push(t),this.render(),this.dispatchEvent(new Event("change"))},t.prototype.onkeydown=function(t){var e,r;if("v"!==t.key||!t.ctrlKey&&!t.metaKey)switch(1===t.key.length&&(this._rope.insert(this._rope.lineToChar(this._cursor[2])+this._cursor[0],t.key),this._cursor[0]+=1,this._cursor[1]=this._cursor[0],this.render()),t.key){case"ArrowLeft":this._cursor[0]>0?(this._cursor[0]-=1,this._cursor[1]=this._cursor[0],this.render()):this._cursor[1]=this._cursor[0];break;case"ArrowRight":this._cursor[0]<Array.from(this._rope.lines())[this._cursor[2]].length?(this._cursor[0]+=1,this._cursor[1]=this._cursor[0],this.render()):this._cursor[1]=this._cursor[0];break;case"ArrowUp":this._cursor[2]>0&&(this._cursor[2]-=1,this._cursor[0]=Math.min(this._cursor[1],Array.from(this._rope.lines())[this._cursor[2]].length),this.render());break;case"ArrowDown":this._cursor[2]<Array.from(this._rope.lines()).length-1&&(this._cursor[2]+=1,this._cursor[0]=Math.min(this._cursor[1],null===(e=Array.from(this._rope.lines())[this._cursor[2]])||void 0===e?void 0:e.length),this.render());break;case"Backspace":if(this._rope.lineToChar(this._cursor[2])+this._cursor[0]>0){var n=null===(r=Array.from(this._rope.lines())[this._cursor[2]-1])||void 0===r?void 0:r.length;this._rope.remove(this._rope.lineToChar(this._cursor[2])+this._cursor[0]-1),this._cursor[0]>0?this._cursor[1]=this._cursor[0]-=1:this._cursor[2]>0&&(this._cursor[2]-=1,this._cursor[1]=this._cursor[0]=n),this.render()}break;case"Enter":this._rope.insert(this._rope.lineToChar(this._cursor[2])+this._cursor[0],"\n"),this._cursor[1]=this._cursor[0]=0,this._cursor[2]+=1,this.render()}},t.prototype.onpaste=function(t){if(t.clipboardData){var e=this._rope.lineToChar(this._cursor[2])+this._cursor[0],r=t.clipboardData.getData("text");this._rope.insert(e,r),this._cursor[2]=this._rope.charToLine(e+r.length),this._cursor[0]=this._cursor[1]=e+r.length-this._rope.lineToChar(this._cursor[2]),this.render()}},t.prototype.render=function(){for(var t,e,r,s,a,h;this._elem.firstChild;)this._elem.removeChild(this._elem.firstChild);try{for(var u=o(l.default.enumerate(this._rope.lineIndices())),c=u.next();!c.done;c=u.next()){var d=n(c.value,2),f=d[0],p=n(d[1],2),v=p[0],_=p[1],y=document.createElement("div"),m=i([[v,_.length,""]],n(this._highlights));f===this._cursor[2]&&m.push([v+this._cursor[0],1,"cursor"]);try{for(var b=(r=void 0,o(Array.from(l.default.merge(v,_.length+1,m)))),g=b.next();!g.done;g=b.next()){var w=n(g.value,3),x=w[0],E=w[1],S=w[2],k=document.createElement("span");try{for(var C=(a=void 0,o(S)),O=C.next();!O.done;O=C.next()){var M=O.value;""!==M&&k.classList.add(M)}}catch(t){a={error:t}}finally{try{O&&!O.done&&(h=C.return)&&h.call(C)}finally{if(a)throw a.error}}k.textContent=_.slice(x-v,x-v+E)||" ",y.appendChild(k)}}catch(t){r={error:t}}finally{try{g&&!g.done&&(s=b.return)&&s.call(b)}finally{if(r)throw r.error}}this._elem.appendChild(y)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}},t}();e.default=h},87:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.offset=0,this.content=t.toString()}return t.prototype.next=function(){if(void 0!==this.content){var t=this.content.indexOf("\n");if(-1!==t){if("\r"===this.content[t-1]){var e=this.content.slice(0,t-1),r=this.offset;return this.content=this.content.slice(t+1),this.offset+=t+1,{done:!1,value:[r,e]}}return e=this.content.slice(0,t),r=this.offset,this.content=this.content.slice(t+1),this.offset+=t+1,{done:!1,value:[r,e]}}return e=this.content,r=this.offset,this.content=void 0,{done:!1,value:[r,e]}}return{done:!0,value:null}},t.prototype[Symbol.iterator]=function(){return this},t}();e.default=r},773:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.content=t.toString()}return t.prototype.next=function(){if(void 0!==this.content){var t=this.content.indexOf("\n");if(-1!==t){if("\r"===this.content[t-1]){var e=this.content.slice(0,t-1);return this.content=this.content.slice(t+1),{done:!1,value:e}}return e=this.content.slice(0,t),this.content=this.content.slice(t+1),{done:!1,value:e}}return e=this.content,this.content=void 0,{done:!1,value:e}}return{done:!0,value:null}},t.prototype[Symbol.iterator]=function(){return this},t}();e.default=r},463:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(r(773)),l=o(r(87)),a=o(r(884)),h=function(){function t(t){this._node=t}return t.leaf=function(e){return void 0===e&&(e=""),new t({kind:"leaf",text:e})},t.branch=function(e,r){return new t({kind:"branch",left:e,right:r})},Object.defineProperty(t.prototype,"length",{get:function(){var t,e;switch(this._node.kind){case"branch":return((null===(t=this._node.left)||void 0===t?void 0:t.length)||0)+((null===(e=this._node.right)||void 0===e?void 0:e.length)||0);case"leaf":return this._node.text.length}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){var t;switch(this._node.kind){case"branch":return(null===(t=this._node.left)||void 0===t?void 0:t.length)||0;case"leaf":return this._node.text.length}},enumerable:!1,configurable:!0}),t.prototype.index=function(t){switch(this._node.kind){case"branch":if(this.weight<=t&&this._node.right)return this._node.right.index(t-this.weight);if(this._node.left)return this._node.left.index(t);throw"unreachable: neither left/right of _node is defined";case"leaf":return this._node.text[t]}},t.prototype.insert=function(e,r){var n=this.split(e);this.concat(t.leaf(r)),this.concat(n)},t.prototype.remove=function(t,e){void 0===e&&(e=1);var r=this.split(t).split(e);this.concat(r)},t.prototype.split=function(e){switch(this._node.kind){case"branch":if(this.weight<=e&&this._node.right)return this._node.right.split(e-this.weight);if(this._node.left){var r=this._node.left.split(e);return this._node.right&&r.concat(this._node.right),this._node.right=null,r}throw"unreachable: neither left/right of _node is defined";case"leaf":return r=t.leaf(this._node.text.slice(e)),this._node.text=this._node.text.slice(0,e),r}},t.prototype.concat=function(e){var r=this._node;this._node={kind:"branch",left:new t(r),right:e}},t.prototype.lines=function(){return new s.default(this)},t.prototype.lineIndices=function(){return new l.default(this)},t.prototype.charToLine=function(t){var e,r,o=0,s=0;try{for(var l=n(a.default.enumerate(this.lineIndices())),h=l.next();!h.done;h=l.next()){var u=i(h.value,2),c=u[0],d=i(u[1],2),f=d[0];if(o=f+d[1].length,f>t)break;s=c}}catch(t){e={error:t}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(t>o)throw new Error("char "+t+" is out of bounds");return s},t.prototype.lineToChar=function(t){var e,r;try{for(var o=n(a.default.enumerate(this.lineIndices())),s=o.next();!s.done;s=o.next()){var l=i(s.value,2),h=l[0],u=i(l[1],1)[0];if(h===t)return u}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}throw new Error("line "+t+" is out of bounds")},t.prototype.toString=function(){var t,e;switch(this._node.kind){case"branch":return((null===(t=this._node.left)||void 0===t?void 0:t.toString())||"")+((null===(e=this._node.right)||void 0===e?void 0:e.toString())||"");case"leaf":return this._node.text}},t}();e.default=h},884:function(t,e){var r=this&&this.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.enumerate=function(t){var e,i,o,s,l,a,h;return r(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:r.trys.push([1,6,7,8]),i=n(t),o=i.next(),r.label=2;case 2:return o.done?[3,5]:(s=o.value,[4,[e++,s]]);case 3:r.sent(),r.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return l=r.sent(),a={error:l},[3,8];case 7:try{o&&!o.done&&(h=i.return)&&h.call(i)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))},t.split=function(t,e,o){var s,l,a,h,u,c,d,f,p;return r(this,(function(r){switch(r.label){case 0:r.trys.push([0,5,6,7]),s=n(o),l=s.next(),r.label=1;case 1:return l.done?[3,4]:(a=i(l.value,3),h=a[0],u=a[1],c=a[2],h<=t+e&&t<=h+u&&Math.min(t+e,h+u)-Math.max(h,t)>0?[4,[Math.max(h,t),Math.min(t+e,h+u)-Math.max(h,t),c]]:[3,3]);case 2:r.sent(),r.label=3;case 3:return l=s.next(),[3,1];case 4:return[3,7];case 5:return d=r.sent(),f={error:d},[3,7];case 6:try{l&&!l.done&&(p=s.return)&&p.call(s)}finally{if(f)throw f.error}return[7];case 7:return[2]}}))},t.edges=function(t){var e,r,o=[];try{for(var s=n(t),l=s.next();!l.done;l=s.next()){var a=i(l.value,3),h=a[0],u=a[1],c=a[2];void 0===o[h]?o[h]=[[c],[]]:o[h][0].push(c),void 0===o[h+u]?o[h+u]=[[],[c]]:o[h+u][1].push(c)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},t.merge=function(e,o,s){var l,a,h,u,c,d,f,p,v,_,y,m,b,g,w,x,E,S,k;return r(this,(function(r){switch(r.label){case 0:l=t.edges(t.split(e,o,s)),a=[],r.label=1;case 1:r.trys.push([1,7,8,9]),u=n(Object.entries(l)),c=u.next(),r.label=2;case 2:return c.done?[3,6]:(d=i(c.value,2),f=d[0],p=i(d[1],2),v=p[0],_=p[1],void 0===h?[3,4]:[4,[h,Number(f)-h,new Set(a)]]);case 3:r.sent(),r.label=4;case 4:Array.prototype.push.apply(a,v);try{for(S=void 0,y=n(_),m=y.next();!m.done;m=y.next()){if(b=m.value,-1===(g=a.indexOf(b)))throw new Error("class never initialized: "+b);a.splice(g,1)}}catch(t){S={error:t}}finally{try{m&&!m.done&&(k=y.return)&&k.call(y)}finally{if(S)throw S.error}}h=Number(f),r.label=5;case 5:return c=u.next(),[3,2];case 6:return[3,9];case 7:return w=r.sent(),x={error:w},[3,9];case 8:try{c&&!c.done&&(E=u.return)&&E.call(u)}finally{if(x)throw x.error}return[7];case 9:return[2]}}))},t}();e.default=o},532:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;var i=r(50);Object.defineProperty(e,"Editor",{enumerable:!0,get:function(){return n(i).default}})}},e={};!function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}(607)})();